function vgseColumnsVisibilityUpdateHOT(e,i,n,t){var o,s=jQuery(".modal-columns-visibility form"),l=s.find(".columns-enabled li .js-column-key"),a=(!l.length&&window.vgseColumnsVisibilityEnabled&&(l=window.vgseColumnsVisibilityEnabled),jQuery(".save_post_type_settings")),r=s.parents(".remodal").remodal(),u=s.find(".columns-enabled li .fa-refresh").parent(),c=!1;if(s.find('input[name="wpse_auto_reload_after_saving"]').val()&&(c=!0),u.length&&(o=[],u.find(".column-title").each(function(){o.push(jQuery(this).text().trim())}),u=vgse_editor_settings.texts.confirm_column_reload_page.replace("{columns}",o.join(", ")),confirm(u))&&(a.prop("checked",!0),c=!0,loading_ajax({estado:!0})),l.length){if("undefined"!=typeof hot){window.vgseColumnsVisibilityEnabled=l,e=e||hot.getSettings().columns,i=i||vgse_editor_settings.colHeaders,n=n||vgse_editor_settings.colWidths;var d=[],m=[],p=[],y=[],u=(e.forEach(function(e,t){e.vgOriginalIndex=t,d[e.data]=e},this),s.find(".not-allowed-columns").val()),g=(u=(u=vgse_editor_settings.columnsFormat.wpseBulkSelector?"wpseBulkSelector,"+u:u).replace("ID,","").split(","),[]);if(l.each(function(){var e=jQuery(this).val();g.push(e)}),(g=u.concat(g)).forEach(function(e,t){d[e]&&(m.push(d[e]),p.push(i[e]),y.push(n[e]))},this),hot.updateSettings({columns:m,colHeaders:p,colWidths:y}),!a.is(":checked")||"softUpdate"===t)return loading_ajax({estado:!1}),"opened"===r.getState()&&r.close(),!1}e=s.find("input,select,textarea").filter(function(){return!jQuery(this).parents(".vgse-sorter-section").length}).serializeArray();e.push({name:"extra_data",value:JSON.stringify(formToObject("columns-manager-form"))}),c&&loading_ajax({estado:!0}),jQuery.post(s.attr("action"),e,function(e){var t=s.data("callback");t&&vgseExecuteFunctionByName(t,window,{response:e,form:s}),c&&window.location.href.indexOf("wpse_no_reload=1")<0&&window.location.reload()}),c||loading_ajax({estado:!1}),r&&"opened"===r.getState()&&r.close()}else loading_ajax({estado:!1}),"opened"===r.getState()&&r.close();return!1}function vgseColumnsVisibilityEqualizeHeight(){jQuery("#vgse-columns-enabled,#vgse-columns-disabled").css("height","");var e=jQuery("#vgse-columns-enabled").height(),t=jQuery("#vgse-columns-disabled").height(),e=t<e?e:t;0<e&&jQuery("#vgse-columns-enabled,#vgse-columns-disabled").height(e)}function vgseColumnsVisibilityInit(){if(window.vgseColumnsVisibilityAlreadyInit)return!0;window.vgseColumnsVisibilityAlreadyInit=!0;var o=document.getElementById("vgse-columns-enabled"),s=document.getElementById("vgse-columns-disabled"),t=jQuery(".modal-columns-visibility");if(!o||!s)return!0;function l(){t.find(".columns-enabled li input").each(function(){jQuery(this).attr("name",jQuery(this).attr("name").replace("disallowed_column","column"))}),t.find(".columns-disabled li input").each(function(){jQuery(this).attr("name",jQuery(this).attr("name").replace(/^column/,"disallowed_column"))});var e=t.find(".columns-enabled li .js-column-key").map(function(){return jQuery(this).val()}).get().join(",");t.find(".all-allowed-columns").val(e),window.vgseColumnsVisibilityUsed=!0}function i(i,e){var n,o,s,t,l,a,r;window.wpseExecutionActionOnSimilarColumns||(n=e.parent().find(".column-title").text(),r=n.replace(/(\d+)/g,"1").replace(": 1: ",":").split("1"),e=e.parents("ul").first(),o=[],s=[],1!==r.length&&(r=[r[0],""],e.find(".column-title").each(function(){var e=jQuery(this).text(),t=e.replace(/(\d+)/g,"1").replace(": 1: ",":").split("1");t.push(""),1<vgseCountMatchingElements(r,t)&&e!==n&&(o.push(jQuery(this).parent().find(".js-column-key").val()),s.push(e))}),o.length)&&(window.wpseExecutionActionOnSimilarColumns=!0,t=4<o.length?vgse_editor_settings.texts.clicks_that_will_be_saved.replace("{clicks_count}",o.length):"",t+="\n"+s.join("\n"),t=vgse_editor_settings.texts.apply_action_to_similar_columns.replace("{columns}",t),confirm(t)&&(l=[],a=[],e.children().each(function(){var e=jQuery(this),t=e.find(".js-column-key").val();-1<o.indexOf(t)&&(".remove-column"!==i&&e.find(i).click(),l.push(e.find(i).parent()),a.push(t))}),".remove-column"===i)&&u(a,l),window.wpseExecutionActionOnSimilarColumns=!1))}function u(e,t){return t.forEach(function(e){e.remove()}),jQuery.post(vgse_global_data.ajax_url,{action:"vgse_remove_column",nonce:jQuery('.modal-columns-visibility input[name="wpsecv_nonce"]').val(),post_type:jQuery('.modal-columns-visibility input[name="wpsecv_post_type"]').val(),column_key:e},function(e){e.success?l():notification({mensaje:e.data.message,tipo:"error",tiempo:3e4})}),!1}vgseColumnsVisibilityEqualizeHeight(),window.enabledSortable=Sortable.create(o,{group:"vgseColumns",animation:100,scrollSensitivity:60,onSort:function(e){_throttle(function(){l()},2e3)()}}),window.disabledSortable=Sortable.create(s,{group:{name:"vgseColumns"},scrollSensitivity:60,animation:100}),jQuery("body").on("click",".modal-columns-visibility .vgse-change-all-states",function(e){e.preventDefault(),"disabled"===jQuery(this).data("to")?jQuery(o).find("li:visible").appendTo(jQuery(s)):jQuery(s).find("li:visible").appendTo(jQuery(o)),l()}),jQuery("body").on("submit",".modal-columns-visibility  form",function(e){e.preventDefault(),l();e=vgseColumnsVisibilityUpdateHOT(null,null,null,"hardUpdate");return"boolean"==typeof e&&e}),jQuery("body").on("click",".modal-columns-visibility  .vgse-restore-removed-columns",function(e){e.preventDefault(),jQuery.post(vgse_global_data.ajax_url,{action:"vgse_restore_columns",nonce:jQuery('.modal-columns-visibility input[name="wpsecv_nonce"]').val(),post_type:jQuery('.modal-columns-visibility input[name="wpsecv_post_type"]').val()},function(e){e.success?alert(e.data.message):notification({mensaje:e.data.message,tipo:"error",tiempo:3e4})})}),jQuery("body").on("click",".modal-columns-visibility   .deactivate-column",function(e){if((e.preventDefault(),window.hot&&!window.wpseExecutionActionOnSimilarColumns)&&beGetModifiedItems().length)return alert(vgse_editor_settings.texts.save_changes_before_remove_column),!0;i(".deactivate-column",jQuery(this)),($column=jQuery(this).parent()).appendTo(".modal-columns-visibility .columns-disabled"),l()}),jQuery("body").on("click",".modal-columns-visibility   .enable-column",function(e){e.preventDefault(),i(".enable-column",jQuery(this)),($column=jQuery(this).parent()).appendTo(".modal-columns-visibility .columns-enabled"),l()}),jQuery("body").on("click",".modal-columns-visibility   .remove-column",function(e){if((e.preventDefault(),window.hot)&&beGetModifiedItems().length)return alert(vgse_editor_settings.texts.save_changes_before_remove_column),!0;e=jQuery(this);return i(".remove-column",jQuery(this)),u([e.parent().find(".js-column-key").val()],[e.parent()])}),l(),jQuery("body").on("change",".vgse-sorter-section .wpse-bulk-action",function(e){var i,t,n=jQuery(this).val();"disable"===n?jQuery(o).find("li:visible").appendTo(jQuery(s)):"enable"===n?jQuery(s).find("li:visible").appendTo(jQuery(o)):"sort_alphabetically_asc"===n?((t=(i=jQuery(this).parents(".vgse-sorter-section").find("ul")).children("li").get()).sort(function(e,t){var e=jQuery(e).find(".column-title").text().toUpperCase(),t=jQuery(t).find(".column-title").text().toUpperCase(),i=e.localeCompare(t);return i=jQuery.isNumeric(e)&&jQuery.isNumeric(t)?(e=parseInt(e))-parseInt(t):i}),jQuery.each(t,function(e,t){i.append(t)})):"sort_alphabetically_desc"===n?((t=(i=jQuery(this).parents(".vgse-sorter-section").find("ul")).children("li").get()).sort(function(e,t){var e=jQuery(e).find(".column-title").text().toUpperCase(),t=jQuery(t).find(".column-title").text().toUpperCase(),i=e.localeCompare(t);return i=jQuery.isNumeric(e)&&jQuery.isNumeric(t)?(e=parseInt(e))-parseInt(t):i}),t.reverse(),jQuery.each(t,function(e,t){i.append(t)})):"delete"===n&&jQuery(s).find("li:visible .remove-column").each(function(){jQuery(this).click()}),jQuery(this).val(""),jQuery(this).parent().find("input").val("").trigger("change"),l()}),jQuery("body").on("click",".vgse-sorter-section .toggle-search-button",function(e){e.preventDefault(),t.find(".wpse-columns-bulk-actions").toggle(),jQuery(this).parents(".vgse-sorter-section").find(".wpse-columns-bulk-actions input").focus()}),jQuery("body").on("keypress",".modal-columns-visibility input",function(e){if(13==e.keyCode)return e.preventDefault(),!1}),jQuery("body").on("keyup change",".vgse-sorter-section .wpse-filter-list",_throttle(function(e){var t,i=jQuery(this).val(),n=jQuery(this).parents(".vgse-sorter-section");i?(t="/"===i[0]?i.replace(/\//g,""):i.toLowerCase(),n.find(".column-title").each(function(){var e=jQuery(this).text().toLowerCase();"/"===i[0]&&new RegExp(t,"gi").test(e)||-1<e.toLowerCase().indexOf(i)?jQuery(this).parent().show():jQuery(this).parent().hide()})):n.find("li").show()},800,{leading:!0})),jQuery(".modal-columns-visibility:visible").length&&jQuery(".modal-columns-visibility .field-type select").trigger("change")}jQuery(document).on("opened",".modal-columns-visibility",function(){jQuery(".lazy-modal-columns-visibility").length||(vgseColumnsVisibilityInit(),vgseColumnsVisibilityEqualizeHeight())}),jQuery(window).on("load",function(){jQuery("body").on("click",".wpse-toggle-head",function(){jQuery(this).next(".wpse-toggle-content").find(".modal-columns-visibility").length&&(vgseColumnsVisibilityEqualizeHeight(),vgseColumnsVisibilityInit())})}),jQuery(document).ready(function(){if("undefined"==typeof hot||!jQuery(".modal-columns-visibility").length)return!0;var e=hot.getSettings().contextMenu;void 0===e.items&&(e.items={}),e.items.wpse_hide_column={name:vgse_editor_settings.texts.hide_column,hidden:function(){var e;return!hot.getSelected()||(e=hot.colToProp(hot.getSelected()[0][1]),(e=vgse_editor_settings.final_spreadsheet_columns_settings[e])&&!e.allow_to_hide)},callback:function(e,t,i){var s;beGetModifiedItems().length?alert(vgse_editor_settings.texts.save_changes_before_remove_column):(vgseColumnsVisibilityInit(),s=jQuery(".modal-columns-visibility"),t.forEach(function(e){for(var t=(e.start.col>e.end.col?e.end:e.start).col,i=(e.start.col>e.end.col?e.start:e.end).col,n=[],o=t;o<=i;o++)n.push(o);n.forEach(function(e){e=hot.colToProp(e);s.find('.columns-enabled .js-column-key[value="'+e+'"]').parent("li").appendTo(s.find(".columns-disabled"))})}),s.find(".save_post_type_settings").prop("checked",!0),s.find("form").submit(),notification({mensaje:vgse_editor_settings.texts.column_removed,tipo:"success",tiempo:4e4}))}},e.items.wpse_open_columns_visibility={name:vgse_editor_settings.texts.open_columns_visibility,callback:function(e,t,i){jQuery(".modal-columns-visibility").remodal().open()}},hot.updateSettings({contextMenu:e})}),jQuery(document).ready(function(){var i=jQuery(".lazy-modal-columns-visibility");if(!i.length)return!0;jQuery(".remodal-bg").data("nonce"),vgse_editor_settings.post_type;jQuery.ajax({url:vgse_global_data.ajax_url,dataType:"json",type:"GET",data:{nonce:jQuery(".remodal-bg").data("nonce"),post_type:vgse_editor_settings.post_type,action:"vgse_load_columns_manager_content",is_editor_page:!0},success:function(e){var t;e.success&&(-1<(e=e.data.html).indexOf("Insert extra buttons here with JS")&&(t="",vgse_editor_settings.is_administrator&&(t+='<button class="remove-column column-action" data-wpse-tooltip="right" aria-label="cm_delete_tip"><i class="fa fa-remove"></i></button>'),t+='<button class="deactivate-column column-action" title="'+vgse_editor_settings.texts.cm_disable_column_tip+'"><i class="fa fa-arrow-right"></i></button><button class="enable-column column-action" title="'+vgse_editor_settings.texts.cm_enable_column_tip+'"><i class="fa fa-arrow-left"></i></button>',e=e.replace(/<\!-- Insert extra buttons here with JS -->/g,t)),t=jQuery(e),i.find(".modal-content").replaceWith(t.find(".modal-content")),i.removeClass("lazy-modal-columns-visibility"),vgseColumnsVisibilityInit(),vgseColumnsVisibilityEqualizeHeight(),vgseInitLazySelects())}})});